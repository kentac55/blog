import Layout from 'lib/components/layout'
import { Card, Link } from '@zeit-ui/react'

export const meta = {
  title: 'esyåˆå›èµ·å‹•æ™‚ã®OCamlãƒ“ãƒ«ãƒ‰ã«å¤±æ•—ã™ã‚‹',
  date: '2020-06-23T15:08:01.487739387+09:00',
  description: '',
  image: '',
  tags: 'esy,ocaml'
}

## esyã¨GCC10ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã¨OCamlã®ãƒ“ãƒ«ãƒ‰ã«æˆåŠŸã—ãªã„ï¼

### esyã£ã¦ä½•

esy(åŸ·ç­†æ™‚æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯`0.6.4`)ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã€‚

<Card width="330px">
<h4>esy</h4>
<p>package.json workflow for native development with Reason/OCaml </p>
<Card.Footer>
  <Link color target="_blank" href="https://github.com/esy/esy">Visit source code on GitHub.</Link>
</Card.Footer>
</Card>

npmé¢¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«å…¼ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã§ã€ReasonML/OCamlã§æ›¸ã‹ã‚ŒãŸPJã‚’ã‚·ãƒ³ã‚°ãƒ«ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚¤ãƒŠãƒªã«ã—ã¦ãã‚Œã‚‹ã€‚ãƒ¡ãƒƒãƒãƒ£ä¾¿åˆ©ã€‚

å®Ÿè¡Œã«ã¯OCamlãŒå¿…è¦ã§ã€åˆå›ã®`esy`å®Ÿè¡Œæ™‚ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰åŠã³ãƒ“ãƒ«ãƒ‰ãŒèµ°ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹(`package.json`ã§æŒ‡å®šã•ã‚ŒãŸOCamlã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹)ã€‚

ã—ã‹ã—ã“ã®OCamlã€GCC10ã‚’ä½¿ã†å ´åˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ“ãƒ«ãƒ‰è¨­å®šã§ã¯ãƒ“ãƒ«ãƒ‰ã«å¤±æ•—ã—ã¦ã—ã¾ã†([ç«‹ã¦ãŸissue](https://github.com/esy/esy/issues/1126))ã€‚

ã“ã®å›é¿æ–¹æ³•ã‚’ãƒ¡ãƒ¢ã£ã¦ãŠãã€‚

### å›é¿æ–¹æ³•

1. æ™®é€šã«`esy`ã‚’å©ã„ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’DLã—ã¦ãƒ“ãƒ«ãƒ‰ã‚’èµ°ã‚‰ã›ã‚‹(å¤±æ•—ã™ã‚‹)
1. `~/.esy/source/i/opam__s__ocaml_secondary_compiler__opam__c__4.08.1_1__77bef36f/esy-configure`ã®28è¡Œç›®ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹(`CC=`ä»¥ä¸‹ã‚’ä»˜ä¸ã™ã‚‹)
    ```Makefile
        ./configure "$@" CC="gcc -fcommon"
    ```
1. å†åº¦`esy`ã‚’å©ãã¨ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹

### ä»–æ³¨æ„

- OCamlã®PJç­‰ã®å ´åˆã¯`package.json`ã«åˆ¥é€”OCamlãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã€‚ãã®å ´åˆã€å¯¾è±¡ã®ã‚½ãƒ¼ã‚¹ã‚’`~/.esy/source/i`ã‹ã‚‰æ¢ã—å‡ºã—ã€åŒæ§˜ã®ãƒ‘ãƒƒãƒã‚’å½“ã¦ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
- `CC`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¨­å®šæ–¹æ³•ã¯OCamlã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ç•°ãªã‚‹ã®ã§`./configure`ã‚’å©ã„ã¦ç¢ºèªã™ã‚‹ã“ã¨
    - ä¾‹ãˆã°Ocaml4.6.0ã®å ´åˆã¯`-cc "gcc -fcommon"`ã®ã‚ˆã†ã«ãªã‚‹
- Ocaml4.10.0ä»¥é™ã¯GCC10ã®ãƒ“ãƒ«ãƒ‰ã«å¯¾å¿œã—ã¦ã„ã‚‹ã®ã§å¯¾å‡¦ä¸è¦

## æœ€å¾Œã«

åŸå› ã‚‚å›é¿æ–¹æ³•ã‚‚åˆ†ã‹ã£ã¦ã„ã¦issueã‚‚ç«‹ã¦ãŸã®ã«ã€ã©ã“ã§`esy-configure`ãŒæ³¨å…¥ã•ã‚Œã¦ã„ã‚‹ã®ã‹ãŒåˆ†ã‹ã‚‰ãšPullRequestã‚’é€ã‚Œãªã‹ã£ãŸğŸ˜­

åŠ›ä¸è¶³ï¼

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
